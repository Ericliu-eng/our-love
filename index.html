<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Our Interactive Love â¤ï¸</title>
    <style>
        body { margin: 0; background: #000; overflow: hidden; font-family: sans-serif; }
        canvas { position: absolute; top: 0; left: 0; }
        
        .ui-layer {
            position: relative;
            z-index: 10;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            pointer-events: none;
        }

        .card {
            text-align: center;
            background: rgba(255, 255, 255, 0.15);
            padding: 30px;
            border-radius: 30px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 80%;
            max-width: 320px;
            pointer-events: auto;
            box-shadow: 0 0 30px rgba(255,107,129,0.3);
        }

        .days-num { font-size: 3.5rem; font-weight: bold; color: #ff6b81; }
        .time-detail { font-size: 1rem; margin: 15px 0; color: #eee; }
        .footer { font-size: 0.8rem; opacity: 0.6; letter-spacing: 2px; }
        .hint { position: absolute; bottom: 20px; color: rgba(255,255,255,0.4); font-size: 0.7rem; }

        /* èŠå¤©ç•Œé¢ */
        #chat-container {
            position: fixed;
            bottom: 85px;
            right: 20px;
            width: 280px;
            height: 380px;
            background: rgba(20, 20, 20, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: none;
            flex-direction: column;
            z-index: 100;
            overflow: hidden;
            pointer-events: auto;
        }

        #chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            color: white;
            font-size: 0.9rem;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .message { padding: 8px 12px; border-radius: 12px; max-width: 85%; word-wrap: break-word; line-height: 1.4; }
        .ai-msg { background: rgba(255, 107, 129, 0.3); align-self: flex-start; }
        .user-msg { background: rgba(255, 255, 255, 0.2); align-self: flex-end; }

        #chat-input-area { display: flex; padding: 12px; background: rgba(0, 0, 0, 0.5); border-top: 1px solid rgba(255,255,255,0.1); }
        #chat-input { flex: 1; background: transparent; border: none; color: white; outline: none; }
        
        #chat-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 55px;
            height: 55px;
            background: #ff6b81;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 101;
            pointer-events: auto;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    
    <div class="ui-layer">
        <div class="card">
            <div style="font-size: 40px;">ğŸ’–</div>
            <div style="margin-top:10px; opacity:0.9;">Z & L</div>
            <div class="days-num" id="days">0</div>
            <div style="font-size:1.2rem; color:#ff6b81; margin-bottom:10px;">DAYS</div>
            <div id="time" class="time-detail">00:00:00</div>
            <div class="footer">SINCE 2025.12.07</div>
        </div>
        <div class="hint">æ»‘åŠ¨å±å¹•è¯•è¯•çœ‹ï¼Œä¼šæœ‰æ˜Ÿå…‰è·Ÿç€ä½  âœ¨</div>
    </div>

    <div id="chat-toggle" onclick="toggleChat()">ğŸ’¬</div>

    <div id="chat-container">
        <div style="padding:10px; text-align:center; font-size:0.8rem; background:rgba(255,107,129,0.5); color:white;">Love AI</div>
        <div id="chat-messages"><div class="message ai-msg">ä½ å¥½ï¼Œæœ‰ä»€ä¹ˆæƒ³å¯¹æˆ‘è¯´å—ï¼Ÿ</div></div>
        <div id="chat-input-area">
            <input type="text" id="chat-input" placeholder="è¾“å…¥..." onkeypress="if(event.key==='Enter') sendMessage()">
            <div onclick="sendMessage()" style="color:#ff6b81; cursor:pointer; margin-left:10px;">å‘é€</div>
        </div>
    </div>

<script>
    /* --- 1. è¿™é‡Œå¡« Key --- */
    const KEY = "AIzaSyDKgVqim9wh9Ux9qJYXfSH3SMyxs-fcy0g"; 

    /* --- 2. åŠ¨ç”»æ•ˆæœ --- */
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    window.onresize = resize;
    resize();
    class Particle {
        constructor(x, y, color) {
            this.x = x; this.y = y;
            this.size = Math.random() * 5 + 2;
            this.speedX = Math.random() * 3 - 1.5;
            this.speedY = Math.random() * 3 - 1.5;
            this.color = color; this.opacity = 1;
        }
        update() { this.x += this.speedX; this.y += this.speedY; this.opacity -= 0.02; }
        draw() {
            if(this.opacity <= 0) return;
            ctx.fillStyle = this.color.replace('rgb', 'rgba').replace(')', `, ${this.opacity})`);
            ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill();
        }
    }
    function createParticles(e) {
        const x = e.touches ? e.touches[0].clientX : e.clientX;
        const y = e.touches ? e.touches[0].clientY : e.clientY;
        const color = `rgb(255, ${Math.random()*100+100}, ${Math.random()*100+150})`;
        for(let i=0; i<3; i++) particles.push(new Particle(x, y, color));
    }
    window.addEventListener('mousemove', createParticles);
    window.addEventListener('touchmove', createParticles);
    animate();
    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles = particles.filter(p => p.opacity > 0);
        particles.forEach(p => { p.update(); p.draw(); });
        requestAnimationFrame(animate);
    }

    /* --- 3. è®¡æ—¶é€»è¾‘ --- */
    function updateTimer() {
        const start = new Date('2025-12-07T00:00:00');
        const now = new Date();
        const diff = now - start;
        document.getElementById('days').innerText = Math.floor(diff / 86400000);
        const h = Math.floor((diff / 3600000) % 24);
        const m = Math.floor((diff / 60000) % 60);
        const s = Math.floor((diff / 1000) % 60);
        document.getElementById('time').innerText = `${h<10?'0'+h:h}h ${m<10?'0'+m:m}m ${s<10?'0'+s:s}s`;
    }
    setInterval(updateTimer, 1000);
    updateTimer();

    /* --- 4. æç®€ AI é€»è¾‘ --- */
    function toggleChat() {
        const chat = document.getElementById('chat-container');
        chat.style.display = (chat.style.display === 'flex') ? 'none' : 'flex';
    }

    async function sendMessage() {
        const input = document.getElementById('chat-input');
        const text = input.value.trim();
        if(!text || !KEY) return;

        addMessage(text, 'user-msg');
        input.value = '';
        const tempId = 'ai-' + Date.now();
        addMessage("...", 'ai-msg', tempId);

        try {
        const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${KEY}`;
        const res = await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ contents: [{ parts: [{ text: `ä½ æ˜¯ä¸€ä¸ªæ¸©æŸ”çš„åŠ©æ‰‹ï¼Œç”¨æˆ·æ­£çœ‹ç€ Z & L åœ¨ä¸€èµ· 64 å¤©çš„çºªå¿µé¡µã€‚å›å¤è¦æš–å¿ƒç®€çŸ­ï¼š${text}` }] }] })
        });
        
        const data = await res.json();
        
        if (data.error) {
            // å¦‚æœ API è¿”å›äº†é”™è¯¯ï¼ˆæ¯”å¦‚ Key æ— æ•ˆæˆ–è¶…é™ï¼‰ï¼Œç›´æ¥æ˜¾ç¤ºåŸå› 
            document.getElementById(tempId).innerText = "AI æš‚æ—¶æ–­å¼€: " + data.error.message;
        } else {
            document.getElementById(tempId).innerText = data.candidates[0].content.parts[0].text;
        }
    } catch (e) {
        // åªæœ‰åœ¨ç½‘ç»œè¿æ¥å½»åº•æ–­å¼€æ—¶æ‰æŠ¥è¿™ä¸ªé”™
        document.getElementById(tempId).innerText = "ç½‘ç»œè¯·æ±‚å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–åˆ·æ–°é¡µé¢ã€‚";
    }
    }

    function addMessage(t, c, id) {
        const d = document.createElement('div');
        d.className = `message ${c}`;
        if(id) d.id = id;
        d.innerText = t;
        const b = document.getElementById('chat-messages');
        b.appendChild(d);
        b.scrollTop = b.scrollHeight;
    }
</script>
</body>
</html>
